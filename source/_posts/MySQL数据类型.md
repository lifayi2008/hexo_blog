---
title: MySQL数据类型
date: 2016-08-25 16:58:07
tags: MySQL
categories: 数据库
---
### MySQL数据类型

#### 字面值类型（Literal value）

MySQL能够识别和使用的字面值类型包括：**`数值`**、**`字符串`**、**`日期/时间值`**、**`十六进制值`**、**`位字段值`**、**`布尔值`**、**`空值`**（NULL）
<!-- more -->
##### 字符串字面值

MySQL中的字符串字面值可以使用单引号或者双引号表示，但推荐总是使用单引号

相邻的两个用单引号引用的字符串被当作一个字符串，比如：

    SELECT 'a string'
    SELECT 'a' ' ' 'string'
    
    是一样的，但是要注意中间的空格字符串

如果启用`ANSI_QUOTES`模式，则双引号被当作一个标识符引用符

二进制字符串字面值是一个字节串，它不包含任何字符集和排序规则；非二进制字符串字面值是一个字符的序列，通常会有一个相关的字符集和排序规则。这两种字符串的对比都是基于各自的字符单元（`byte` `character`）。后者的排序规则由相应的collation来决定

字符串字面值可以使用一个可选的字符集引导标志和排序规则字句：

    [_charset_name]'string' [COLLATE collation_name]
    
    SELECT _latin1'string';
    SELECT _latin1'string' COLLATE latin1_danish_ci;

You can use N'literal' (or n'literal') to create a string in the national character set. These statements are equivalent:

    SELECT N'some text';
    SELECT n'some text';
    SELECT _utf8'some text';

如果未启用`NO_BACKSLASH_ESCAPES`模式，MySQL的字符串中也可以使用和编程语言类似的转义字符：`\0` `\'` `\"` `\b` `\n` `\r` `\t` `\\` `\Z` `\%` `\_`；转义字符后跟其他字符的话，转义字符被忽略

##### 数值字面值

MySQL数值字面值包括精确值和近似值，Mysql对精确值进行精确计算，对近似值进行近似计算

**`精确值`**

*`整数`* 整数可以用十进制和十六进制来表示；十六进制值被默认当作字符串对待（每两个字符是一个ASCII字符），但是在进行数值运算的上下文里，十六进制被视为64位整数，运算结果也是64位整数  

*`带小数点的有理数`*：由三个部分组成：一个数字序列、一个小数点再加一个数字序列，小数点前后的数字序列有一个可以为空；这种数值也叫做 `DECIMAL` `NUMERIC` `FIXED`

**`近似值`**

近似值类似于编程语言中的浮点数，带有一个底数和一个指数；具体的做法是在一个整数或者浮点数后面紧跟字母`e`或者`E`，然后是一个正负号，然后是一个以整数表示的指数

> 数值字面值可以加上一个正号或者负号来表示一个正数或者负数

在对表达式进行求值时MySQL根据以下规则进行运算：

*   只要表达式里面有一个近似值就把其他的也当作近似值进行计算
*   如果表达式里面全是整数形式的精确值，MySQL将使用BIGINT 64位精度对它进行求值
*   如果表达式里面全是精确值，但其中有一个或者多个有小数部分，则使用65位精度进行DECIMAL运算
*   如果在求值过程中需要将某一个字符串转换为一个数值，则它会被转换为双精度浮点值。于是根据前面的规则求值的结果是浮点值

##### 日期和时间字面值

日期和时间值可以用几种格式来表示，比如字符串或者数值。在MySQL期望接收一个日期类型值的上下文里`'2015-07-21'` `'20150721'` `20150721`都被当作一个日期字面值

**`标准的SQL和ODBC日期时间字面值`**  标准SQL允许使用类型关键字和一个字符串构成一个临时的日期时间字面值：
    
    DATE 'str'
    TIME 'str'
    TIMESTAMP 'str'
    
> 空格是可选的，str要在特定的范围内；最后一种方式构建的日期类型是`DATETIME`

**`在日期和时间上下文中使用字符串和数值字面值`**  

*   MySQL可以识别这些格式的`DATE`值: 
    *   带分隔符的`'YYYY-MM-DD'` `'YY-MM-DD'`格式的字符串，分隔符还可以使用`/` `^` `@`等
    *   不带分隔符的`'YYYYMMDD'` `'YYMMDD'`格式的字符串
    *   不带分隔符的`YYYYMMDD` `YYMMDD`格式的数值

*   MySQL可以识别这些格式的`DATETIME` `TIMESTAMP`值：
    *   带分隔符的`'YYYY-MM-DD HH:MM:SS'` `'YY-MM-DD HH:MM:SS'`格式的字符串，日期和时间中的分隔符都可以使用其他的，也可以混合使用；日期和时间之间可以使用空格也可以使用字符`T`
    *   不带分隔符的`'YYYYMMDDHHMMSS'` `'YYMMDDHHMMSS'`格式的字符串
    *   不带分隔符的`YYYYMMDDHHMMSS` `YYMMDDHHMMSS`格式的数值
    
在未给出世纪元素的表示法中，MySQL按如下规则转换：70-99被转换1970-1999，00-69被转换为2000-2069

> 上面这些值必须在相应日期元素合法值的范围内，比如小时对应的值不能大于23

*   MySQL可以识别这些格式的`TIME`值
    *   带分隔符的`'D HH:MM:SS'` `'HH:MM:SS'` `'HH:MM'` `'D HH:MM'` `'D HH'` `'SS'`字符串值；`D`字符表示天可以是0-34之间的值
    *   不带分隔符的`'HHMMSS'`字符串值
    *   不带分隔符的`HHMMSS`数值

上面构成`DATETIME` `TIMESTAMP` `TIME`类型字面值的值后面还可以加一个小数点和六位数字来表示微秒；在使用分隔符的情况下如果表示日期时间元素的数值小于10，则单个的数字`1` `2` `3`表示`01` `02` `03`

##### 十六进制字面值

MySQL支持十六进制的字面值，可以使用`X'val'` `x'val'`的形式（标准SQL语法）或者`0xval`的形式（ODBC语法），`val`是偶数的十六进制字符，如果`val`不是偶数则MySQL默认在前面加一个`0`

在数值上下文中，十六进制字面值被当作64为精度的数值；在字符串上下文中被当作一个二进制字符串，每对十六进制字符被转换成一个ASCII字符

默认情况下十六进制字面值被当作字符串。可以使用`CAST(... AS UNSIGN)`函数来进行转换
    
    SELECT X'41', CAST(X'41' AS UNSIGNED);

要将一个字符串或者数值转换为十六进制字符串形式可以使用`HEX()`函数

    SELECT HEX('cat');
    
##### 布尔字面值

布尔字面值就是常量`TRUE`和`FALSE`，在MySQL中他们同于`1` `0`；字面值的大小写任意

##### 位字段（Bit-Field）字面值

位字段字面值可以使用`b'value'` `0bvalue`的格式表示，`value`是`0`或者`1`构成的字符序列，这样的值本质上是二进制值

位字段字面值可以方便的用来给`BIT`数据列插入数据：
    
    mysql> CREATE TABLE t (b BIT(8));
    mysql> INSERT INTO t SET b = b'11111111';
    mysql> INSERT INTO t SET b = b'1010';
    mysql> INSERT INTO t SET b = b'0101';
    
位字段字面值表示的是二进制值，是不可打印的；如果要打印出这些值可以给它加上`0`或者使用`BIN()`函数。高位的`0`不打印

    mysql> SELECT b+0, BIN(b+0), OCT(b+0), HEX(b+0) FROM t;
    +------+----------+----------+----------+
    | b+0  | BIN(b+0) | OCT(b+0) | HEX(b+0) |
    +------+----------+----------+----------+
    |  255 | 11111111 | 377      | FF       |
    |   10 | 1010     | 12       | A        |
    |    5 | 101      | 5        | 5        |
    +------+----------+----------+----------+
    
为字段值赋给用户变量时被当作二进制字符串。要将位字段值作为数值可以使用`CAST(... AS UNSIGN)`函数或者给它加上0

##### 空值

空值意味着没有数据。`NULL`可以任意大小写。`NULL`等同于`\N`

在使用`LOAD DATA INFILE` `SELECT ... INTO OUTFILE`语句导入或者导出的文件中`NULL`使用`\N`表示
